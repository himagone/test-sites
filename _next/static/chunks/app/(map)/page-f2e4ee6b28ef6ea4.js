(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[320],{32805:e=>{"use strict";e.exports=JSON.parse('{"gsidem10b":{"name":"DEM10B","tiles":["reliefGsidem10b://https://cyberjapandata.gsi.go.jp/xyz/dem_png/{z}/{x}/{y}.png"],"encoding":"gsi","attribution":"<a href=\\"https://www.gsi.go.jp/\\" target=\\"_blank\\">&copy; GSI Japan</a>","url":"https://cyberjapandata.gsi.go.jp/xyz/dem_png/{z}/{x}/{y}.png","maxZoom":14,"defaultExaggeration":0.8},"gsidem5a":{"name":"DEM5A","tiles":["reliefGsidem5a://https://cyberjapandata.gsi.go.jp/xyz/dem5a_png/{z}/{x}/{y}.png"],"encoding":"gsi","attribution":"<a href=\\"https://www.gsi.go.jp/\\" target=\\"_blank\\">&copy; GSI Japan</a>","url":"https://cyberjapandata.gsi.go.jp/xyz/dem5a_png/{z}/{x}/{y}.png","maxZoom":15,"defaultExaggeration":0.8},"gsidem5b":{"name":"DEM5B","tiles":["reliefGsidem5b://https://cyberjapandata.gsi.go.jp/xyz/dem5b_png/{z}/{x}/{y}.png"],"encoding":"gsi","attribution":"<a href=\\"https://www.gsi.go.jp/\\" target=\\"_blank\\">&copy; GSI Japan</a>","url":"https://cyberjapandata.gsi.go.jp/xyz/dem5b_png/{z}/{x}/{y}.png","maxZoom":15,"defaultExaggeration":0.8},"gsidem5c":{"name":"DEM5C","tiles":["reliefGsidem5c://https://cyberjapandata.gsi.go.jp/xyz/dem5c_png/{z}/{x}/{y}.png"],"encoding":"gsi","attribution":"<a href=\\"https://www.gsi.go.jp/\\" target=\\"_blank\\">&copy; GSI Japan</a>","url":"https://cyberjapandata.gsi.go.jp/xyz/dem5c_png/{z}/{x}/{y}.png","maxZoom":15,"defaultExaggeration":0.8},"gsidem1A":{"name":"DEM1A","tiles":["reliefGsidem1A://https://cyberjapandata.gsi.go.jp/xyz/dem1a_png/{z}/{x}/{y}.png"],"encoding":"gsi","attribution":"<a href=\'https://www.gsi.go.jp/\' target=\'_blank\'>&copy; GSI Japan</a>","url":"https://cyberjapandata.gsi.go.jp/xyz/dem1a_png/{z}/{x}/{y}.png","maxZoom":17,"defaultExaggeration":0.8}}')},41342:(e,s,n)=>{"use strict";n.d(s,{LayerGroupItemProvider:()=>r,U:()=>a});var l=n(95155),t=n(12115);let i=(0,t.createContext)([]),r=e=>{let{children:s,layerGroupItems:n}=e;return(0,l.jsx)(i.Provider,{value:n,children:s})},a=()=>{let e=(0,t.useContext)(i);if(!e)throw Error("useLayerGroupItems must be used within a LayerGroupItemProvider");return e}},42967:(e,s,n)=>{Promise.resolve().then(n.bind(n,63629))},63629:(e,s,n)=>{"use strict";n.r(s),n.d(s,{default:()=>eC});var l=n(95155),t=n(25588),i=n(81068),r=n(11434),a=n(17921),o=n(55028),d=n(41342),c=n(38639),x=n(13274),h=n(29513),j=n(23484),p=n(43235),g=n(96252),m=n(88400),u=n(35599),b=n(97377),y=n(76540),f=n(72760),S=n(14549),v=n(97582),C=n(90017),z=n(2637),w=n(70318);let O=e=>{let{demSources:s,selectedDemSource:n,onDemSelected:t}=e,i=(0,C.Rk)({items:s.map(e=>({value:e.id,label:e.name}))}),r=e=>{let n=s.find(s=>s.id===e);n&&t(n)};return(0,l.jsxs)(z.H5,{size:"xs",w:180,px:1,collection:i,value:[(null==n?void 0:n.id)||""],positioning:{placement:"bottom-end"},onValueChange:e=>r(e.value[0]),children:[(0,l.jsx)(z.JK,{}),(0,l.jsxs)(z.Yq,{children:[(0,l.jsx)(z.bq,{children:(0,l.jsx)(z.NM,{placeholder:"標高データソースを選択"})}),(0,l.jsx)(z.b3,{children:(0,l.jsx)(z.mP,{})})]}),(0,l.jsx)(w.Z,{children:(0,l.jsx)(z.lE,{children:(0,l.jsx)(z.gC,{children:i.items.map(e=>(0,l.jsxs)(z.eb,{item:e,children:[e.label,(0,l.jsx)(z.h3,{})]},e.value))})})})]})};var k=n(89248),D=n(7684),E=n(90310),I=n(58126),M=n(34602),_=n(12115);let B=e=>{let{layerGroupItems:s,activeLayerSets:n,toggleActiveLayerSet:t}=e;return(0,l.jsx)(c.B,{gap:0,children:s.map(e=>(0,l.jsx)(L,{item:e,activeLayerSets:n,toggleActiveLayerSet:t},e.id))})},L=e=>{let{item:s,activeLayerSets:n,toggleActiveLayerSet:t}=e,[i,a]=(0,_.useState)([]);return(0,l.jsx)(l.Fragment,{children:"LayerGroup"===s.type?(0,l.jsx)(r.Xl,{size:"sm",variant:"plain",collapsible:!0,value:i,onValueChange:e=>a(e.value),children:(0,l.jsxs)(r.As,{value:s.id,children:[(0,l.jsxs)(r.Sx,{py:1,children:[s.iconUrl?(0,l.jsx)(k._,{src:s.iconUrl,alt:s.title,h:4,w:4}):(0,l.jsx)(D.I,{w:4,h:4,children:(0,l.jsx)(S.s21,{})}),(0,l.jsx)(E.E,{children:s.title}),(0,l.jsx)(I.h,{}),(0,l.jsx)(r.Fr,{})]}),(0,l.jsx)(r.b,{pl:4,children:(0,l.jsx)(r.i$,{py:1,children:i.includes(s.id)&&(0,l.jsx)(c.B,{gap:0,children:s.items.map(e=>(0,l.jsx)(L,{item:e,activeLayerSets:n,toggleActiveLayerSet:t},e.id))})})})]})}):(0,l.jsxs)(M.y8,{size:"sm",checked:n.some(e=>e.id===s.id),onCheckedChange:()=>t(s.id),children:[(0,l.jsx)(M.Ks,{}),(0,l.jsx)(M.v7,{children:(0,l.jsx)(M.P7,{})}),(0,l.jsx)(M.Sb,{children:s.title})]})})};var N=n(77342),R=n(75143),A=n(50402),G=n(78266);let X=e=>{let{activeLayerSets:s,onChange:n}=e,t=e=>{n(s.map(s=>s.id===e.id?e:s))},i=e=>{n(s.filter(s=>s.id!==e.id))};return(0,l.jsx)(R.Mp,{collisionDetection:R.fp,onDragEnd:e=>{let{active:l,over:t}=e;if(l.id!==(null==t?void 0:t.id)){let e=s.findIndex(e=>e.id===l.id),i=s.findIndex(e=>e.id===(null==t?void 0:t.id)),r=[...s],[a]=r.splice(e,1);r.splice(i,0,a),n(r)}},children:(0,l.jsx)(A.gB,{items:s.toReversed(),strategy:A._G,children:(0,l.jsx)(c.B,{children:s.toReversed().map(e=>(0,l.jsx)(P,{layerSet:e,onChange:t,onRemove:i},e.id))})})})},P=e=>{let{layerSet:s,onChange:n,onRemove:t}=e,{attributes:i,listeners:r,setNodeRef:a,transform:o,transition:d}=(0,A.gl)({id:s.id}),x={transform:G.Ks.Transform.toString(o),transition:d,touchAction:"none"};return(0,l.jsxs)(b.z,{ref:a,style:x,w:"100%",gap:1,borderColor:"border",borderWidth:1,borderRadius:"md",p:1,children:[(0,l.jsx)(N.K,{"aria-label":"Drag handle",variant:"ghost",size:"sm",...i,...r,children:(0,l.jsx)(S.MLX,{})}),(0,l.jsxs)(c.B,{w:"100%",gap:1,children:[(0,l.jsx)(E.E,{fontSize:"sm",children:s.title}),(0,l.jsxs)(b.z,{w:"100%",justifyContent:"space-between",children:[(0,l.jsx)(p.g1,{size:"sm",flexShrink:0,w:"80%",max:1,step:.02,value:[s.opacity],onValueChange:e=>n({...s,opacity:e.value[0]}),children:(0,l.jsxs)(p.XB,{children:[(0,l.jsx)(p.hB,{children:(0,l.jsx)(p.tO,{})}),(0,l.jsx)(p.RY,{})]})}),(0,l.jsx)(N.K,{colorPalette:"red",variant:"outline",size:"2xs",onClick:()=>t(s),children:(0,l.jsx)(S.Mst,{})})]})]})]})};var J=n(39339),V=n(92860),T=n(14594),Z=n(47100),K=n(56993),Y=n(36380);let q=(0,Z.j)({placement:"bottom-end",pauseOnPageIdle:!0}),U=()=>(0,l.jsx)(w.Z,{children:(0,l.jsx)(K.l$,{toaster:q,insetInline:{mdDown:"4"},children:e=>{var s;return(0,l.jsxs)(K.mk,{width:{md:"sm"},children:["loading"===e.type?(0,l.jsx)(Y.y,{size:"sm",color:"blue.solid"}):(0,l.jsx)(K.Lv,{}),(0,l.jsxs)(c.B,{gap:"1",flex:"1",maxWidth:"100%",children:[e.title&&(0,l.jsx)(K.Sb,{children:e.title}),e.description&&(0,l.jsx)(K.aD,{children:e.description})]}),e.action&&(0,l.jsx)(K.gC,{children:e.action.label}),(null===(s=e.meta)||void 0===s?void 0:s.closable)&&(0,l.jsx)(K.k1,{})]})}})});var $=n(35341);let F=_.forwardRef(function(e,s){let{showArrow:n,children:t,disabled:i,portalled:r=!0,content:a,contentProps:o,portalRef:d,...c}=e;return i?t:(0,l.jsxs)($.sb,{...c,children:[(0,l.jsx)($.k$,{asChild:!0,children:t}),(0,l.jsx)(w.Z,{disabled:!r,container:d,children:(0,l.jsx)($.ol,{children:(0,l.jsxs)($.ZI,{ref:s,...o,children:[n&&(0,l.jsx)($.PR,{children:(0,l.jsx)($.Mo,{})}),a]})})})]})});var W=n(75656),H=n(85623);let Q=["blue","green","yellow","purple","orange"],ee=e=>{let s=e.charCodeAt(0)%Q.length;return Q[s]},es=(0,W.H2)({outlineWidth:"2px",outlineColor:"border.info !important",outlineOffset:"2px",outlineStyle:"solid"}),en=e=>{let{style:s,isSelected:n,onClicked:t,deletable:r=!1,onDeleted:a}=e,o=(0,_.useId)(),[d,c]=(0,_.useState)(!1);return(0,l.jsxs)(i.a,{position:"relative",onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:[(0,l.jsx)(F,{content:s.name,ids:{trigger:o},children:(0,l.jsxs)(H.Cy,{as:"button",focusRing:"outside",focusRingColor:"border.inverted",ids:{root:o},css:n?es:void 0,colorPalette:ee(s.name),shape:"rounded",size:"lg",onClick:t,cursor:"pointer",children:[(0,l.jsx)(H.q5,{name:s.name}),(0,l.jsx)(H.BK,{src:s.icon})]})}),r&&(0,l.jsx)(N.K,{"aria-label":"削除",size:"2xs",variant:"subtle",colorPalette:"red",position:"absolute",bottom:-1,right:-1,onClick:a,visibility:d?"visible":"hidden",children:(0,l.jsx)(S.Mst,{})})]})},el=e=>{let{styles:s,selectedStyle:n,onStyleSelected:t,onStyleUploaded:i,onStyleDeleted:r}=e,a=async e=>{try{let s=e.files[0];if(!s)throw Error("アップロードに失敗しました");let n=await s.text(),l={id:crypto.randomUUID(),name:s.name,style:JSON.parse(n),deletable:!0};i(l)}catch(e){console.error("Invalid JSON file:",e),q.create({type:"error",title:function(e){return e instanceof Error?e.message:String(e)}(e)})}};return(0,l.jsxs)(J.r,{px:1,w:"100%",gap:2,columns:6,children:[(0,l.jsx)(V.a,{each:s,children:e=>(0,l.jsx)(en,{style:e,isSelected:(null==n?void 0:n.id)===e.id,onClicked:()=>t(e),deletable:e.deletable,onDeleted:()=>r(e)},e.id)}),(0,l.jsxs)(T.YM,{accept:".json",maxFileSize:5e6,onFileAccept:a,children:[(0,l.jsx)(T.yD,{}),(0,l.jsx)(F,{content:"スタイルJSONをアップロード",children:(0,l.jsx)(T.k,{asChild:!0,children:(0,l.jsx)(N.K,{"aria-label":"スタイルJSONをアップロード",variant:"subtle",size:"lg",children:(0,l.jsx)(S._rf,{})})})})]})]})};var et=n(21766),ei=n(91548),er=n(73825),ea=n(75909),eo=n(65506),ed=n(2188),ec=n(38684),ex=n(53868);let eh=e=>{let{tint:s,colorOpacity:n,onChange:t,onDelete:i}=e,[r,a]=(0,_.useState)(s.from.toString()),[o,d]=(0,_.useState)((0,et.qg)("rgba(".concat(s.color.join(","),", ").concat(n,")"))),[h,j]=(0,_.useState)(!1);return(0,l.jsxs)(b.z,{w:"100%",pr:1,children:[(0,l.jsxs)(ec.C,{children:[s.from," m~"]}),(0,l.jsx)(I.h,{}),(0,l.jsx)(N.K,{colorPalette:"red",onClick:i,variant:"outline",size:"2xs",children:(0,l.jsx)(S.Mst,{})}),(0,l.jsxs)(er.Dz,{placement:"center",open:h,onOpenChange:e=>j(e.open),closeOnInteractOutside:!1,children:[(0,l.jsx)(er.zM,{asChild:!0,children:(0,l.jsx)(N.K,{variant:"outline",size:"2xs",children:(0,l.jsx)(S.H6t,{})})}),(0,l.jsx)(er.Xi,{}),(0,l.jsx)(er.f5,{children:(0,l.jsxs)(er.Cf,{m:2,children:[(0,l.jsx)(er.c7,{children:(0,l.jsx)(er.L3,{children:"色彩の編集"})}),(0,l.jsx)(er.R4,{children:(0,l.jsxs)(c.B,{children:[(0,l.jsxs)(x.XO,{children:[(0,l.jsx)(x.dh,{children:"標高（m）"}),(0,l.jsx)(eo.p,{type:"number",min:-9999,max:9999,value:r,onChange:e=>a(e.target.value)})]}),(0,l.jsxs)(ed.Y0,{maxW:200,value:o,onValueChange:e=>d(e.value),children:[(0,l.jsx)(ed.c,{}),(0,l.jsx)(ed.UR,{children:"色彩"}),(0,l.jsxs)(ed.Nz,{children:[(0,l.jsx)(ed.it,{}),(0,l.jsx)(ed.u3,{})]}),(0,l.jsx)(w.Z,{children:(0,l.jsx)(ed.sO,{children:(0,l.jsxs)(ed.zi,{children:[(0,l.jsx)(ed.Z3,{}),(0,l.jsxs)(b.z,{children:[(0,l.jsx)(ed.PV,{size:"xs",variant:"outline"}),(0,l.jsx)(ed.as,{channel:"hue"})]})]})})})]})]})}),(0,l.jsxs)(er.Es,{children:[(0,l.jsx)(er.Tt,{asChild:!0,children:(0,l.jsx)(ea.$,{variant:"outline",children:"キャンセル"})}),(0,l.jsx)(ea.$,{disabled:!r||!o,onClick:()=>{t({...s,from:parseInt(r),color:[o.getChannelValue("red"),o.getChannelValue("green"),o.getChannelValue("blue")]}),j(!1)},children:"保存"})]})]})})]}),(0,l.jsx)(ex.qM,{size:"lg",value:"rgba(".concat(s.color.join(","),", ").concat(n,")")})]})},ej=e=>{let{tints:s,colorOpacity:n,onChange:t}=e,[i,r]=(0,_.useState)(!1),[a,o]=(0,_.useState)("0"),[d,h]=(0,_.useState)((0,et.qg)("rgba(235, 94, 65, ".concat(n,")"))),j=(e,n)=>{let l=[...s];l[e]=n,t(l.sort((e,s)=>e.from-s.from))},p=e=>{t(s.filter((s,n)=>n!==e).sort((e,s)=>e.from-s.from))};return(0,l.jsxs)(c.B,{gap:1,children:[(0,l.jsx)(V.a,{each:s,children:(e,s)=>(0,l.jsxs)(_.Fragment,{children:[(0,l.jsx)(eh,{tint:e,colorOpacity:n,onChange:e=>j(s,e),onDelete:()=>p(s)}),(0,l.jsx)(ei.w,{})]},JSON.stringify(e))}),(0,l.jsx)(b.z,{justifyContent:"flex-end",pr:1,children:(0,l.jsxs)(er.Dz,{placement:"center",open:i,onOpenChange:e=>r(e.open),closeOnInteractOutside:!1,children:[(0,l.jsx)(er.zM,{asChild:!0,children:(0,l.jsxs)(ea.$,{size:"2xs",children:["追加 ",(0,l.jsx)(S._rf,{})]})}),(0,l.jsx)(er.Xi,{}),(0,l.jsx)(er.f5,{children:(0,l.jsxs)(er.Cf,{m:2,children:[(0,l.jsx)(er.c7,{children:(0,l.jsx)(er.L3,{children:"色彩の追加"})}),(0,l.jsx)(er.R4,{children:(0,l.jsxs)(c.B,{children:[(0,l.jsxs)(x.XO,{children:[(0,l.jsx)(x.dh,{children:"標高（m）"}),(0,l.jsx)(eo.p,{type:"number",min:-9999,max:9999,value:a,onChange:e=>o(e.target.value)})]}),(0,l.jsxs)(ed.Y0,{maxW:200,value:d,onValueChange:e=>h(e.value),children:[(0,l.jsx)(ed.c,{}),(0,l.jsx)(ed.UR,{children:"色彩"}),(0,l.jsxs)(ed.Nz,{children:[(0,l.jsx)(ed.it,{}),(0,l.jsx)(ed.u3,{})]}),(0,l.jsx)(w.Z,{children:(0,l.jsx)(ed.sO,{children:(0,l.jsxs)(ed.zi,{children:[(0,l.jsx)(ed.Z3,{}),(0,l.jsxs)(b.z,{children:[(0,l.jsx)(ed.PV,{size:"xs",variant:"outline"}),(0,l.jsx)(ed.as,{channel:"hue"})]})]})})})]})]})}),(0,l.jsxs)(er.Es,{children:[(0,l.jsx)(er.Tt,{asChild:!0,children:(0,l.jsx)(ea.$,{variant:"outline",children:"キャンセル"})}),(0,l.jsx)(ea.$,{disabled:!a||!d,onClick:()=>{t([...s,{from:parseInt(a),color:[d.getChannelValue("red"),d.getChannelValue("green"),d.getChannelValue("blue")]}].sort((e,s)=>e.from-s.from)),r(!1)},children:"追加"})]})]})})]})})]})},ep=e=>{let{styles:s,selectedStyle:n,onStyleSelected:t,onStyleUploaded:o,onStyleDeleted:d,demSources:C,selectedDemSource:z,onDemSelected:w,shadowOpacity:k,onShadowOpacityChange:D,enableTerrain:E,onEnableTerrainChange:I,colorOpacity:M,onColorOpacityChange:_,demTints:L,onDemTintsChange:N,enablePointCloud:R,onEnablePointCloudChange:A,layerGroupItems:G,activeLayerSets:P,toggleActiveLayerSet:J,setActiveLayerSets:V,enableShadow:T,onEnableShadowChange:Z,enableColor:K,onEnableColorChange:Y}=e;return(0,l.jsxs)(c.B,{w:"100%",h:"100%",gap:4,children:[(0,l.jsxs)(c.B,{children:[(0,l.jsx)(a.D,{size:"sm",children:"ベースマップ"}),(0,l.jsx)(el,{styles:s,selectedStyle:n,onStyleSelected:t,onStyleUploaded:o,onStyleDeleted:d})]}),(0,l.jsxs)(c.B,{gap:0,children:[(0,l.jsx)(a.D,{size:"sm",children:"標高タイル"}),(0,l.jsxs)(x.XO,{orientation:"horizontal",px:1,mb:"0.5rem",children:[(0,l.jsx)(x.dh,{children:"ソース"}),(0,l.jsx)(O,{demSources:C,selectedDemSource:z,onDemSelected:w})]}),(0,l.jsxs)(x.XO,{orientation:"horizontal",px:1,mb:"0.5rem",children:[(0,l.jsx)(x.dh,{children:"立体表示"}),(0,l.jsxs)(h.lq,{px:1,checked:E,onCheckedChange:e=>I(e.checked),children:[(0,l.jsx)(h.tD,{}),(0,l.jsx)(h.oO,{children:(0,l.jsx)(h.pD,{})})]})]}),(0,l.jsxs)(x.XO,{orientation:"horizontal",px:1,mb:"0.5rem",children:[(0,l.jsx)(x.dh,{children:"陰影表示"}),(0,l.jsxs)(h.lq,{px:1,checked:T,onCheckedChange:e=>Z(e.checked),children:[(0,l.jsx)(h.tD,{}),(0,l.jsx)(h.oO,{children:(0,l.jsx)(h.pD,{})})]})]}),(0,l.jsx)(j.Nb,{open:T,children:(0,l.jsx)(j.Ke,{children:(0,l.jsxs)(x.XO,{orientation:"horizontal",px:1,mb:"0.5rem",children:[(0,l.jsx)(x.dh,{children:"透過率"}),(0,l.jsx)(p.g1,{size:"sm",px:1,w:180,max:1,step:.02,value:[k],onValueChange:e=>D(e.value[0]),children:(0,l.jsxs)(p.XB,{children:[(0,l.jsx)(p.hB,{children:(0,l.jsx)(p.tO,{})}),(0,l.jsx)(p.RY,{})]})})]})})}),(0,l.jsxs)(x.XO,{orientation:"horizontal",px:1,mb:"0.5rem",children:[(0,l.jsx)(x.dh,{children:"段彩表示"}),(0,l.jsxs)(h.lq,{px:1,checked:K,onCheckedChange:e=>Y(e.checked),children:[(0,l.jsx)(h.tD,{}),(0,l.jsx)(h.oO,{children:(0,l.jsx)(h.pD,{})})]})]}),(0,l.jsx)(j.Nb,{open:K,children:(0,l.jsxs)(j.Ke,{children:[(0,l.jsxs)(x.XO,{orientation:"horizontal",px:1,mb:"0.5rem",children:[(0,l.jsx)(x.dh,{children:"透過率"}),(0,l.jsx)(p.g1,{size:"sm",px:1,w:180,max:1,step:.02,value:[M],onValueChange:e=>_(e.value[0]),children:(0,l.jsxs)(p.XB,{children:[(0,l.jsx)(p.hB,{children:(0,l.jsx)(p.tO,{})}),(0,l.jsx)(p.RY,{})]})})]}),(0,l.jsx)(r.Xl,{variant:"plain",collapsible:!0,px:1,mb:"0.5rem",children:(0,l.jsxs)(r.As,{value:"color",children:[(0,l.jsxs)(r.Sx,{fontSize:"sm",w:"100%",py:0,justifyContent:"space-between",children:["設定",(0,l.jsx)(r.Fr,{})]}),(0,l.jsx)(r.b,{children:(0,l.jsx)(r.i$,{pb:0,children:(0,l.jsx)(ej,{tints:L,colorOpacity:M,onChange:N})})})]})})]})})]}),(0,l.jsxs)(c.B,{children:[(0,l.jsx)(a.D,{size:"sm",children:"点群"}),(0,l.jsxs)(x.XO,{orientation:"horizontal",px:1,children:[(0,l.jsx)(x.dh,{children:"表示"}),(0,l.jsxs)(h.lq,{px:1,checked:R,onCheckedChange:e=>A(e.checked),children:[(0,l.jsx)(h.tD,{}),(0,l.jsx)(h.oO,{children:(0,l.jsx)(h.pD,{})})]})]})]}),(0,l.jsxs)(c.B,{children:[(0,l.jsx)(a.D,{size:"sm",children:"レイヤー"}),(0,l.jsx)(i.a,{px:1,children:(0,l.jsx)(B,{layerGroupItems:G,activeLayerSets:P,toggleActiveLayerSet:J})})]}),(0,l.jsxs)(c.B,{children:[(0,l.jsx)(a.D,{size:"sm",children:"選択中のレイヤー"}),0===P.length?(0,l.jsx)(g.o,{children:(0,l.jsx)(m.Ff,{children:(0,l.jsxs)(m.cV,{children:[(0,l.jsx)(m.sX,{children:(0,l.jsx)(S.KuR,{})}),(0,l.jsxs)(u.T,{textAlign:"center",children:[(0,l.jsx)(m.RT,{fontSize:"xs",children:"選択中のレイヤーがありません"}),(0,l.jsx)(m.zQ,{fontSize:"xs",children:"レイヤーセクションから表示するレイヤーを選択してください"})]})]})})}):(0,l.jsx)(X,{activeLayerSets:P,onChange:V})]}),(0,l.jsx)(b.z,{h:6,px:1,children:(0,l.jsx)(y.Y,{fallback:(0,l.jsx)(f.EA,{}),children:(0,l.jsx)(v.TY,{size:"2xs"})})})]})},eg=e=>{let{layerGroupItems:s}=e,[n,l]=(0,_.useState)([]),t=(e,s)=>{for(let n of e){if("Layer"===n.type&&n.id===s)return n;if("LayerGroup"===n.type){let e=t(n.items,s);if(e)return e}}return null};return{activeLayerSets:n,toggleActiveLayerSet:e=>{let n=t(s,e);n&&l(s=>s.some(s=>s.id===e)?s.filter(s=>s.id!==e):[...s,n])},setActiveLayerSets:l}},em=Object.entries(n(32805)).map(e=>{let[s,n]=e;return{id:s,name:n.name,url:"gsi"===n.encoding?"gsidem://".concat(n.url):n.url,tiles:n.tiles,encoding:"gsi"===n.encoding?"terrarium":n.encoding,maxZoom:n.maxZoom,attribution:n.attribution,tileSize:"gsi"===n.encoding?256:512}}),eu=[{from:-10,color:[83,135,148]},{from:0,color:[83,135,148]},{from:1,color:[0,204,204]},{from:10,color:[128,215,255]},{from:30,color:[191,255,191]},{from:60,color:[117,255,117]},{from:140,color:[73,179,2]},{from:300,color:[255,255,0]},{from:600,color:[253,164,32]},{from:900,color:[217,109,0]},{from:1100,color:[163,87,10]},{from:1500,color:[148,107,64]},{from:2e3,color:[143,132,122]},{from:2500,color:[187,181,175]},{from:3e3,color:[230,229,227]},{from:4e3,color:[255,255,255]}],eb=()=>{let[e,s]=(0,_.useState)(em[0]),[n,l]=(0,_.useState)(!1),[t,i]=(0,_.useState)(.4),[r,a]=(0,_.useState)(!1),[o,d]=(0,_.useState)(.4),[c,x]=(0,_.useState)(!1),[h,j]=(0,_.useState)(eu);return{mapDemSources:em,selectedDemSource:e,setSelectedDemSource:s,shadowOpacity:t,setShadowOpacity:i,enableTerrain:c,setEnableTerrain:x,demTints:h,setDemTints:j,colorOpacity:o,setColorOpacity:d,enableShadow:n,setEnableShadow:l,enableColor:r,setEnableColor:a}},ey=[{id:"std-3d",name:"標準地図",style:"styles/std.json",icon:"images/std.png",deletable:!1},{id:"pale-3d",name:"淡色地図",style:"styles/pale.json",icon:"images/pale.png",deletable:!1},{id:"skeleton",name:"白地図",style:"styles/skeleton.json",icon:"images/skeleton.png",deletable:!1},{id:"english",name:"English",style:"styles/std-english.json",icon:"images/std-english.png",deletable:!1},{id:"seamlessphoto",name:"写真",style:"styles/seamlessphoto.json",icon:"images/seamlessphoto.png",deletable:!1}],ef=()=>{let[e,s]=(0,_.useState)(ey),[n,l]=(0,_.useState)(ey[0]);return(0,_.useEffect)(()=>{let e=localStorage.getItem("uploadedMapStyles");e&&s([...ey,...JSON.parse(e)])},[]),{mapStyles:e,selectedMapStyle:n,setSelectedMapStyle:l,handleStyleUploaded:e=>{s(s=>[...s,e]);let n=JSON.parse(localStorage.getItem("uploadedMapStyles")||"[]");localStorage.setItem("uploadedMapStyles",JSON.stringify([...n,e]))},handleStyleDeleted:t=>{s(e.filter(e=>e.id!==t.id)),n.id===t.id&&l(ey[0]);let i=JSON.parse(localStorage.getItem("uploadedMapStyles")||"[]");localStorage.setItem("uploadedMapStyles",JSON.stringify(i.filter(e=>e.id!==t.id)))}}},eS=()=>{let[e,s]=(0,_.useState)(!1);return{enablePointCloud:e,setEnablePointCloud:s}},ev=(0,o.default)(()=>Promise.all([n.e(573),n.e(600),n.e(345),n.e(623)]).then(n.bind(n,37623)).then(e=>e.MapComponent),{loadableGenerated:{webpack:()=>[37623]},ssr:!1});function eC(){let{mapStyles:e,selectedMapStyle:s,setSelectedMapStyle:n,handleStyleUploaded:o,handleStyleDeleted:c}=ef(),{mapDemSources:x,selectedDemSource:h,setSelectedDemSource:j,shadowOpacity:p,setShadowOpacity:g,enableTerrain:m,setEnableTerrain:u,demTints:b,colorOpacity:y,setColorOpacity:f,setDemTints:S,enableShadow:v,setEnableShadow:C,enableColor:z,setEnableColor:w}=eb(),{enablePointCloud:O,setEnablePointCloud:k}=eS(),D=(0,d.U)(),{activeLayerSets:E,toggleActiveLayerSet:I,setActiveLayerSets:M}=eg({layerGroupItems:D});return(0,l.jsxs)(t.s,{height:"100dvh",w:"100%",position:"relative",children:[(0,l.jsx)(i.a,{position:"absolute",px:4,m:2,top:0,left:0,w:350,bg:"bg",borderRadius:"md",zIndex:100,boxShadow:"md",children:(0,l.jsx)(r.Xl,{variant:"plain",collapsible:!0,defaultValue:["menu"],children:(0,l.jsxs)(r.As,{value:"menu",children:[(0,l.jsxs)(r.Sx,{justifyContent:"space-between",py:"7px",children:[(0,l.jsx)(a.D,{children:"点群タイル閲覧サイト"}),(0,l.jsx)(r.Fr,{})]}),(0,l.jsx)(r.b,{maxH:"calc(100dvh - 62px)",overflowY:"auto",scrollbar:"hidden",children:(0,l.jsx)(r.i$,{children:(0,l.jsx)(ep,{styles:e,selectedStyle:s,onStyleSelected:n,onStyleUploaded:o,onStyleDeleted:c,demSources:x,selectedDemSource:h,onDemSelected:j,shadowOpacity:p,onShadowOpacityChange:g,enableTerrain:m,onEnableTerrainChange:u,colorOpacity:y,onColorOpacityChange:f,demTints:b,onDemTintsChange:S,enablePointCloud:O,onEnablePointCloudChange:k,layerGroupItems:D,activeLayerSets:E,toggleActiveLayerSet:I,setActiveLayerSets:M,enableShadow:v,onEnableShadowChange:C,enableColor:z,onEnableColorChange:w})})})]})})}),(0,l.jsx)(ev,{mapStyle:s.style,mapDemSource:h,shadowOpacity:p,enableTerrain:m,demTints:b,colorOpacity:y,enablePointCloud:O,activeLayerSets:E,enableShadow:v,enableColor:z}),(0,l.jsx)(U,{})]})}},97582:(e,s,n)=>{"use strict";n.d(s,{TY:()=>j,an:()=>c});var l=n(95155),t=n(76540),i=n(72760),r=n(77342),a=n(51362),o=n(12115),d=n(14549);function c(e){return(0,l.jsx)(a.N,{attribute:"class",disableTransitionOnChange:!0,...e})}function x(){let{resolvedTheme:e,setTheme:s}=(0,a.D)();return{colorMode:e,setColorMode:s,toggleColorMode:()=>{s("dark"===e?"light":"dark")}}}function h(){let{colorMode:e}=x();return"dark"===e?(0,l.jsx)(d.NLk,{}):(0,l.jsx)(d.qoe,{})}let j=o.forwardRef(function(e,s){let{toggleColorMode:n}=x();return(0,l.jsx)(t.Y,{fallback:(0,l.jsx)(i.EA,{boxSize:"8"}),children:(0,l.jsx)(r.K,{onClick:n,variant:"ghost","aria-label":"Toggle color mode",size:"sm",ref:s,...e,css:{_icon:{width:"5",height:"5"}},children:(0,l.jsx)(h,{})})})})}},e=>{var s=s=>e(e.s=s);e.O(0,[150,669,84,441,684,358],()=>s(42967)),_N_E=e.O()}]);